create tablespace DMT_TBS datafile 'C:/oraclexe/app/oracle/oradata/XE/DMT.dbf' size 50m autoextend on;

CREATE USER DMT IDENTIFIED BY DMT DEFAULT TABLESPACE DMT_TBS;
GRANT CONNECT TO DMT; 
GRANT RESOURCE TO DMT;



CREATE TABLE CLIENT (	"CLIENT_ID" 	NUMBER(19,0) NOT NULL ENABLE, 
						"CLIENT_NAME" 	VARCHAR2(255 CHAR) NOT NULL, 
						CONSTRAINT "CLIENT_ID_PK" PRIMARY KEY ("CLIENT_ID")
						);
						
						
CREATE TABLE PRODUCT (	"PRODUCT_ID" 	NUMBER(19,0) NOT NULL ENABLE, 
						"PRODUCT_NAME" 	VARCHAR2(255 CHAR) NOT NULL, 
						CONSTRAINT "PRODUCT_ID_PK" PRIMARY KEY ("PRODUCT_ID")
						);

CREATE TABLE MODULE (	"MODULE_ID" 	NUMBER(19,0) NOT NULL ENABLE,
						"PRODUCT_ID" NUMBER(19,0),
						"MODULE_NAME" 	VARCHAR2(255 CHAR) NOT NULL, 
						CONSTRAINT "MODULE_ID_PK" PRIMARY KEY ("MODULE_ID"),
						CONSTRAINT "MODULE_PRODUCT_ID_FK" FOREIGN KEY ("PRODUCT_ID")
						REFERENCES "PRODUCT" ("PRODUCT_ID") ENABLE
						);
						
CREATE TABLE FIELDS (	"FIELD_ID" 	NUMBER(19,0) NOT NULL ENABLE,
						"MODULE_ID" NUMBER(19,0),
						"FIELD_NAME" 	VARCHAR2(255 CHAR) NOT NULL,
						"FIELD_DESC" 	VARCHAR2(255 CHAR),
						CONSTRAINT "FIELD_ID_PK" PRIMARY KEY ("FIELD_ID"),
						CONSTRAINT "FIELDS_MODULE_ID_FK" FOREIGN KEY ("MODULE_ID")
						REFERENCES "MODULE" ("MODULE_ID") ENABLE
						);
					
CREATE TABLE LK_CLIENT_PRODUCT (	"CLI_PRO_ID" 		NUMBER(19,0) NOT NULL ENABLE,
									"CLIENT_ID" 	NUMBER(19,0) NOT NULL,
									"PRODUCT_ID" 	NUMBER(19,0) NOT NULL,
									CONSTRAINT "LK_CLI_PRO_PK" PRIMARY KEY ("CLI_PRO_ID"),
									CONSTRAINT "LK_CLI_PRO_CLIENT_ID_FK" FOREIGN KEY ("CLIENT_ID")
									REFERENCES "CLIENT" ("CLIENT_ID") ENABLE,
									CONSTRAINT "LK_CLI_PRO_PRODUCT_ID_FK" FOREIGN KEY ("PRODUCT_ID")
									REFERENCES "PRODUCT" ("PRODUCT_ID") ENABLE
								);

CREATE TABLE MAPPING (		"CLI_PRO_ID" 	NUMBER(19,0) NOT NULL ENABLE,
							"MODULE_ID" 	NUMBER(19,0) NOT NULL,
							"FIELD_ID" 		NUMBER(19,0) NOT NULL,
							"FIELD_VALUE" 	VARCHAR2(255 CHAR) NOT NULL,
							CONSTRAINT "MAPPING_PK" PRIMARY KEY ("CLI_PRO_ID","MODULE_ID","FIELD_ID"),
							CONSTRAINT "MAPPING_CLI_PRO_ID_FK" FOREIGN KEY ("CLI_PRO_ID")
							REFERENCES "LK_CLIENT_PRODUCT" ("CLI_PRO_ID") ENABLE,
							CONSTRAINT "MAPPING_MODULE_ID_FK" FOREIGN KEY ("MODULE_ID")
							REFERENCES "MODULE" ("MODULE_ID") ENABLE,
							CONSTRAINT "MAPPING_FIELD_ID_FK" FOREIGN KEY ("FIELD_ID")
							REFERENCES "FIELDS" ("FIELD_ID") ENABLE
						);
								
